<div id="menu-frame" class="column is-one-fifth is-hidden-touch">
  <aside class="menu">
    <p class="menu-label">
      Categories
    </p>
    <ul class="menu-list">
      {% assign lists_categories = site.posts | map: "categories" %}
      {% assign categories = lists_categories | uniq | sort %}
      {% if categories %}
        {% for category in categories %}
          <li>
            <a class="{% if page.categories contains category %}is-active{% endif %}"
               href="/category/#{{ category }}"
               title="Show all entries in {{ category }}">{{ category }}
               {% assign post_count = 0 %}
               {% for i in lists_categories %}
                 {% if i contains category %}
                   {% assign post_count = post_count | plus: 1 %}
                 {% endif %}
               {% endfor %}
               <span class="badge is-badge-small is-badge-outlined is-badge-dark" data-badge="{{ post_count }}"></span>
            </a>
          </li>
        {% endfor %}
      {% else %}
        <li>No categorie yet.</li>
      {% endif %}
    </ul>
    <p class="menu-label">
      Recent posts
    </p>
    <ul class="menu-list">
      {% if site.posts %}
        {% for post in site.posts %}
          {% if forloop.index > 7 %}
            {% break %}
          {% endif %}
          <li class="">
            <a href="{{ post.url | absolute_url }}" title="{{ post.title }}" rel="bookmark">{{ post.title }}</a>
          </li>
        {% endfor %}
      {% else %}
        <li>No post yet.</li>
      {% endif %}
    </ul>
    <p class="menu-label">
      Tags
    </p>
    {% assign lists_tags = site.posts | map: "tags" %}
    {% assign tags = lists_tags | uniq | sort %}
    {% assign avg = tags.size | times: 1.0 | divided_by: lists_tags.size %}
    <div class="tags">
      {% if tags %}
        {% for tag in tags %}
          {% assign post_count = 0 %}
          {% for i in lists_tags %}
            {% if i contains tag %}
              {% assign post_count = post_count | plus: 1 %}
            {% endif %}
          {% endfor %}
          <span class="tag is-light">
            <a href="/tag/#{{ tag }}"
               title="{%- case post_count -%}
               {%- when 0 -%}No post
               {%- when 1 -%}{{ post_count }} post tagged by {{ tag }}
               {%- else -%}{{ post_count }} posts tagged by {{ tag }}
               {%- endcase -%}"
               class="tag-{{ post_count | divided_by: avg | times: 2.5 | floor }}{% if post.tags contains tag %} is-danger{% endif %}">{{ tag }}</a>
          </span>
        {% endfor %}
      {% else %}
        <li>
          No tag yet.
        </li>
      {% endif %}
    </ul>
    <p class="menu-label">
      Recent comments
    </p>
    <ul class="menu-list">
      <div id="recentcomments" class="dsq-widget collapse in"><script type="text/javascript" src="https://sundry-rockheung.disqus.com/recent_comments_widget.js?num_items=5&hide_avatars=1&avatar_size=32&excerpt_length=200"></script></div>
    </ul>
  </aside>
</div>
